---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

interface Props {
  bedMeshImage: ImageMetadata;
}

const { bedMeshImage } = Astro.props;

const comparisons = [
  { left: '~10 MB RAM', right: '50+ MB RAM' },
  { left: 'Declarative XML UI', right: 'Imperative code' },
  { left: 'Active development', right: 'Maintenance mode' },
];
---

<section class="py-10 md:py-16 px-4">
  <div class="max-w-6xl mx-auto">
    <!-- Section heading -->
    <h2 class="font-heading text-2xl md:text-4xl font-medium text-text-primary text-center mb-14">
      See the difference
    </h2>

    <!-- Side-by-side visuals -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12 mb-14">
      <!-- HelixScreen -->
      <div class="flex flex-col items-center">
        <div class="screenshot-glow w-full">
          <Image
            src={bedMeshImage}
            alt="HelixScreen 3D bed mesh visualization"
            class="w-full h-auto rounded-lg border border-border/50"
            widths={[480, 768]}
            sizes="(max-width: 768px) 95vw, 45vw"
          />
        </div>
        <span class="font-heading text-text-primary font-medium text-lg mt-4">HelixScreen</span>
        <span class="text-text-secondary text-sm mt-1">Interactive 3D surface</span>
      </div>

      <!-- Traditional -->
      <div class="flex flex-col items-center">
        <div class="heatmap-placeholder w-full aspect-[16/10] rounded-lg border border-border/50 overflow-hidden">
          <div class="heatmap-grid w-full h-full"></div>
        </div>
        <span class="font-heading text-text-primary font-medium text-lg mt-4">Traditional</span>
        <span class="text-text-secondary text-sm mt-1">Flat 2D heatmap</span>
      </div>
    </div>

    <!-- Comparison points -->
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 max-w-4xl mx-auto mb-10">
      {comparisons.map((item) => (
        <div class="flex flex-col items-center text-center gap-1.5 py-3">
          <span class="text-accent-light font-heading font-medium text-sm">{item.left}</span>
          <span class="text-text-muted text-xs">vs</span>
          <span class="text-text-muted text-sm">{item.right}</span>
        </div>
      ))}
    </div>

    <!-- Link -->
    <div class="text-center">
      <a href="/compare" class="text-accent hover:underline text-sm font-heading transition-colors">
        Full comparison &rarr;
      </a>
    </div>
  </div>
</section>

<style>
  .heatmap-placeholder {
    background-color: var(--color-surface);
    position: relative;
  }

  .heatmap-grid {
    background:
      /* Color gradient: green to yellow to red */
      linear-gradient(135deg,
        #1a6b3c 0%,
        #2d8a4e 15%,
        #6ab04c 25%,
        #a8cc3c 35%,
        #c8d840 42%,
        #e6d730 50%,
        #e8a735 58%,
        #d4763a 68%,
        #c44e3d 78%,
        #a63042 90%,
        #8b1a3a 100%
      );
    opacity: 0.55;
    position: relative;
  }

  .heatmap-grid::after {
    content: '';
    position: absolute;
    inset: 0;
    background:
      /* Horizontal grid lines */
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent calc(100% / 8 - 1px),
        rgba(255, 255, 255, 0.08) calc(100% / 8 - 1px),
        rgba(255, 255, 255, 0.08) calc(100% / 8)
      ),
      /* Vertical grid lines */
      repeating-linear-gradient(
        90deg,
        transparent,
        transparent calc(100% / 8 - 1px),
        rgba(255, 255, 255, 0.08) calc(100% / 8 - 1px),
        rgba(255, 255, 255, 0.08) calc(100% / 8)
      );
  }
</style>
